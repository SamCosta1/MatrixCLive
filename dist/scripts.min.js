function Fraction(t,i){this.top=t,this.bottom=i,void 0==t?(this.top="0",this.bottom="1"):void 0==i&&(this.bottom="1"),this.bottom=this.bottom.toString(),this.top=this.top.toString(),this.top.includes("/")&&(this.top=t.split("/")[0],this.bottom=t.split("/")[1]),this.top=new Big(this.top),this.bottom=new Big(this.bottom);var e=!this.top.mod(1).eq(0);if(botDec=!this.bottom.mod(1).eq(0),e||botDec){var r=e?this.top.toString().split(".")[1].length:0,a=botDec?this.bottom.toString().split(".")[1].length:0,n=Big(10).pow(a>r?a:r);this.top=this.top.times(n),this.bottom=this.bottom.times(n)}var s=GCD(this.top,this.bottom);this.top=this.top.div(s),this.bottom=this.bottom.div(s),this.bottom.lt(0)&&(this.top=this.top.times(-1),this.bottom=this.bottom.times(-1)),this.parseLiteral=function(t){return t instanceof Fraction?t:new Fraction(t)},this.simplify=function(){var t=GCD(this.top,this.bottom);this.top=this.top.div(t),this.bottom=this.bottom.div(t),this.bottom.lt(0)&&(this.top=this.top.times(-1),this.bottom=this.bottom.times(-1))},this.divide=function(t){t=this.parseLiteral(t);var i=new Fraction;return i.top=this.top.times(t.bottom),i.bottom=this.bottom.times(t.top),i.simplify(),i},this.times=function(t){if(t=this.parseLiteral(t),this.top.eq(0)||t.top.eq(0))return new Fraction;var i=new Fraction;return i.bottom=this.bottom.times(t.bottom),i.top=this.top.times(t.top),i.simplify(),i},this.power=function(t){t=this.parseLiteral(t);for(var i=parseInt(t.top.valueOf()),e=this.clone(),r=1;r<i;r++)e=e.times(this);return e},this.add=function(t){t=this.parseLiteral(t);var i=new Fraction;return i.top=this.top.times(t.bottom).add(this.bottom.times(t.top)),i.bottom=this.bottom.times(t.bottom),i.simplify(),i},this.subtract=function(t){t=this.parseLiteral(t);var i=new Fraction;return i.top=this.top.times(t.bottom).minus(this.bottom.times(t.top)),i.bottom=this.bottom.times(t.bottom),i.simplify(),i},this.reciprocal=function(){return 0!=this.top?new Fraction(this.bottom,this.top):new Fraction},this.getLiteral=function(){return parseInt(this.top.div(this.bottom).valueOf())},this.isZero=function(){return this.top.eq(0)},this.isOne=function(){return this.bottom.eq(this.top)},this.toString=function(){return this.top.eq(0)?"0":this.bottom.eq(1)?this.top.toString():this.isOne()?"1":this.top.toString()+"/"+this.bottom.toString()},this.clone=function(){return new Fraction(this.top,this.bottom)}}function GCD(t,i){var e=t.mod(i);return e.eq(0)?i:GCD(i,e)}function Matrix(t,e){this.matrix=t,this.multiplier=new Fraction("1"),void 0==t?this.matrix=getZeros(3).matrix:isNaN(t)||(this.matrix=getZeros(t,e).matrix),this.update=function(t,i,e){this.matrix[parseInt(t)][parseInt(i)]=e instanceof Fraction?e:new Fraction(e)},this.getCell=function(t,i){return this.matrix[t][i]},this.numRows=function(){return this.matrix.length},this.numCols=function(){return this.matrix[0].length},this.clone=function(){for(var t=[],i=0;i<this.numRows();i++){for(var e=[],r=0;r<this.numCols();r++)e.push(this.getCell(i,r).clone());t.push(e)}return new Matrix(t)},this.determinant=function(){if(2==this.numRows())return this.getCell(0,0).times(this.getCell(1,1)).subtract(this.getCell(1,0).times(this.getCell(0,1)));for(var t=this.reduceToReducedEchF(),i=t.multiplier,e=t.numRows()-1,r=new Fraction,a=1,n=0;n<t.numCols();n++,a*=-1)0!=t.matrix[e][n]&&(r=r.add(t.subMatrix(e,n).det().times(a).times(t.matrix[e][n])));return r.times(i)},this.subMatrix=function(t,i){for(var e=[],r=0;r<this.numRows();r++)if(r!=t){for(var a=[],n=0;n<this.numCols();n++)n!=i&&a.push(this.getCell(r,n).clone());e.push(a)}return new Matrix(e)},this.det=function(){return this.determinant()},this.transpose=function(){for(var t=[],i=0;i<this.numCols();i++){for(var e=[],r=0;r<this.numRows();r++)e.push(this.getCell(r,i));t.push(e)}return new Matrix(t)},this.concat=function(t){for(var i=this.clone().matrix,e=0;e<i.length;e++)i[e]=i[e].concat(t.matrix[e]);return new Matrix(i)},this.inverse=function(){for(var t=this.concat(this.getIdentity(this.numCols())).reduceToReducedEchF(this.numCols()),i=0;i<this.numRows();i++){for(var e=0;e<this.numCols();e++)if(e==i){if(!t.getCell(i,e).isOne())throw"Matrix non invertible"}else if(!t.getCell(i,e).isZero())throw"Matrix non invertible";t.matrix[i]=t.matrix[i].slice(this.numCols(),2*this.numCols())}return t},this.add=function(t){for(var i=[],e=0;e<this.numRows();e++){for(var r=[],a=0;a<this.numCols();a++)r.push(this.getCell(e,a).add(t.getCell(e,a)));i.push(r)}return new Matrix(i)},this.subtract=function(t){for(var i=[],e=0;e<this.numRows();e++){for(var r=[],a=0;a<this.numCols();a++)r.push(this.getCell(e,a).subtract(t.getCell(e,a)));i.push(r)}return new Matrix(i)},this.times=function(t){if(!(t instanceof Matrix))return this.timesScalar(t);if(this.numCols()!=t.numRows()||this.numRows()!=t.numCols())throw"Dimension mismatch, can't multiply "+this.numRows()+"x"+this.numCols()+" by "+t.numRows()+"x"+t.numCols();for(var i=new Matrix(this.numRows(),t.numCols()),e=0;e<this.numRows();e++)for(var r=0;r<this.numCols();r++){for(var a=new Fraction,n=0;n<this.numCols();n++)a=a.add(this.getCell(e,n).times(t.getCell(n,r)));i.update(e,r,a)}return i},this.timesScalar=function(t){for(var i=new Matrix(this.numRows(),this.numCols()),e=0;e<this.numRows();e++)for(var r=0;r<this.numCols();r++)i.update(e,r,this.getCell(e,r).times(t));return i},this.divide=function(t){return t instanceof Matrix?this.times(t.inverse()):t instanceof Fraction?this.times(t.reciprocal()):this.times(new Fraction(1,t))},this.power=function(t){if(this.numCols()!=this.numRows())throw"You can only calculate powers of square matricies!";var e;if(t<0)e=this.inverse(),t=Math.abs(t);else{if(0==t)return this.getIdentity();e=this}for(e=this.times(e),i=1;i<t-1;i++)e=this.times(e);return e},this.conjugate=function(t){return t.inverse().times(this).times(t)},this.performFunction=function(t,i){switch(t){case funcENUM.TRANSPOSE:return this.transpose();case funcENUM.INVERSE:return this.inverse();case funcENUM.RANK:return null;case funcENUM.DET:return this.det();case funcENUM.DIAGONALIZE:return null;case funcENUM.ROWREDUCE:return this.reduceToReducedEchF();case funcENUM.SOLVAUG:return this.reduceToReducedEchF(-1);case funcENUM.ID:return this.getIdentity(i[0],i[1]);case funcENUM.ZEROS:return this.getZeros(i[0],i[1])}throw"Something weird just happened!"},this.reduceToReducedEchF=function(t){void 0==t||t>this.numCols()?t=this.numCols():t==-1&&t--;for(var i=this.numRows(),e=this.clone(),r=0,a=0;a<t&&r<i;a++){if(0==e.getCell(r,a)){var n=e.getNonZeroRows(r,a);if(n==-1)continue;e.swap(n,r)}var s=e.getCell(r,a).reciprocal();e.multiplier=e.multiplier.divide(s),e.matrix[r]=e.multiplyRow(r,s),e.kill(r,a),r++}return e},this.kill=function(t,i){for(var e=0;e<this.numRows();e++)if(e!=t){var r=this.getCell(e,i);r.isZero()||(this.matrix[e]=this.subtractRows(this.matrix[e],this.multiplyRow(t,r)))}},this.getNonZeroRows=function(t,i){for(t++;t<this.numRows()&&0==this.getCell(t,i);)t++;return t==this.numRows()?-1:t},this.subtractRows=function(t,i){if(t.length!=i.length)throw"Something weird happened!";for(var e=[],r=0;r<t.length;r++)e.push(t[r].subtract(i[r]));return e},this.multiplyRow=function(t,i){for(var e=[],r=0;r<this.numCols();r++)e.push(this.getCell(t,r).clone().times(i));return e},this.swap=function(t,i){var e=this.matrix[t];this.matrix[t]=this.matrix[i],this.matrix[i]=e,this.multiplier=this.multiplier.times(-1)},this.resize=function(t,i){if(t=parseInt(t),i=parseInt(i),t<this.numRows())this.matrix=this.matrix.slice(0,t);else if(t!=this.numRows()){for(var e=[],r=0;r<i;r++)e.push(new Fraction);this.matrix.push(e)}if(i<this.numCols())for(var a=0;a<t;a++)this.matrix[a]=this.matrix[a].slice(0,i);else if(i!=this.numCols())for(var r=0;r<t;r++)this.matrix[r].push(new Fraction)},this.getIdentity=function(t,i){void 0==t&&void 0!=i&&(t=i),void 0!=t&&void 0==i&&(i=t),void 0==t&&(t=this.numRows()),void 0==i&&(i=this.numCols());for(var e=[],r=0;r<t;r++){for(var a=[],n=0;n<i;n++)r==n?a.push(new Fraction(1)):a.push(new Fraction);e.push(a)}return new Matrix(e)}}function getZeros(t,i){void 0==t&&void 0!=i&&(t=i),void 0!=t&&void 0==i&&(i=t);for(var e=[],r=0;r<t;r++){for(var a=[],n=0;n<i;n++)a.push(new Fraction);e.push(a)}return new Matrix(e)}function getEnum(t){switch(t.toLowerCase()){case"transpose":case"trans":return funcENUM.TRANSPOSE;case"inverse":case"inv":return funcENUM.INVERSE;case"rank":return funcENUM.RANK;case"det":case"determinant":return funcENUM.DET;case"eigen":return funcENUM.EIGEN;case"diagonalize":return funcENUM.DIAGONALIZE;case"rowreduce":return funcENUM.ROWREDUCE;case"solveaugmented":case"solveaugmentedmatrix":return funcENUM.SOLVAUG;case"id":case"identity":return funcENUM.ID;case"zeros":return funcENUM.ZEROS}return funcENUM.NONE}function getNextFreeLetter(){if(letterIndex++,letterIndex>=alphabet.length&&(letterIndex=0),isValid(alphabet[letterIndex]))return alphabet[letterIndex];var t=alphabet[letterIndex]+parseInt(100*Math.random());return isValid(t)?t:void getNextFreeLetter()}function commandInput(t){try{var i=Date.now();$("#errDisplay").hide(),performCalc(t),$("#cmdinput").val(base);var e=Date.now()-i;successHandle(e),console.log("Operation done in "+e+"ms")}catch(t){errorHandle(t),$("#cmdinput").val($("#cmdinput").val().replace(/\n/g,""))}}function errorHandle(t){console.log(t),$("#errDisplay").css("color","red"),$("#errDisplay").text(t).show()}function successHandle(t){$("#errDisplay").css("color","#008e0d"),$("#errDisplay").text("Command Successful! ("+t+" ms)").show(200),setTimeout(function(){$("#errDisplay").hide(500)},2e3)}function performCalc(t){if(t=t.replace(/ /g,"").replace(/\n/g,""),t.includes(";")){var i=t.split(";");for(var e in i)performCalc(i[e])}else{var r=t,a="",n=!1;if(t.includes("=")){if(n=!0,a=t.split("=")[0],!isValid(a,!0))throw"Invalid Variable Name :(";t=t.split("=")[1]}else a=getNextFreeLetter();t="("+t+")";var s=getArrayFromString(t);if(!n&&3==s.length)return $("#MAT-"+r).trigger("click"),void $("#MAT-"+r).get(0).scrollIntoView();for(var o=0;o<s.length;o++)if(isCloseBracket(s[o])){for(var c=o;!isOpenBracket(s[c]);){if(isOperator(s[c])){var l=calculate(s[c-1],s[c+1],s[c]);s.splice(c,2),s[c-1]=l}c--}if(funcENUM.isFunction(s[c-1])){for(var u=[],h=0;!isCloseBracket(s[h+(c+1)]);)","!=s[h+(c+1)]&&u.push(s[h+(c+1)]),h++;var d=performFunction(s[c-1],u);s.splice(c,h+2),s[c-1]=d}else s.splice(c,1),s.splice(c+1,1);if(0===c)break;o=c-1}if(variables.get(a)){if(typeof variables.get(a)!=typeof s[0])throw"object"==typeof s[0]?"You can't assign a matrix to a number":"You can't assign a number to a matrix";updateGUI(a,s[0])}else newInputComp(a,s[0])}}function getArrayFromString(t){var i=1,e=0,r=[];r.add=function(t){isOpenBracket(t)?i++:isCloseBracket(t)&&e++,this.push(t)},r.push("(");for(var a=1;a<t.length;a++){if(isOperatorOrBracket(t[a])&&!isOperatorOrBracket(t[a-1])){for(var n=a-1,s="";!isOperatorOrBracket(t[n]);)s=t[n]+s,n--;var o;if(isNaN(s)){if((o=getEnum(s))==funcENUM.NONE&&"undefined"==typeof(o=variables.get(s))&&","!=(o=s))throw"Sorry, I don't know what '"+s+"' is :("}else o=new Fraction(s),"-"==r[r.length-1]&&isNaN(r[r.length-2])&&(r.pop(),o=o.times(-1)),"+"==r[r.length-1]&&isNaN(r[r.length-2])&&r.pop();r.push(o)}isOperatorOrBracket(t[a])&&r.add(t[a])}if(i>e)throw"Unexpected character (";if(e>i)throw"Unexpected character )";return r}function performFunction(t,i){if(i[0]instanceof Matrix)return i[0].performFunction(t);if(t!=funcENUM.ID&&t!=funcENUM.ZEROS)throw"Cannot perform operation: "+funcENUM.getString(t)+" of "+i[0];return(new Matrix).performFunction(t,i)}function calculate(t,i,e){var r;switch(e){case"+":if(t instanceof Matrix&&!(i instanceof Matrix)||i instanceof Matrix&&!(t instanceof Matrix))throw"You can't add a matrix and number sorry!";r=t.add(i);break;case"-":if(t instanceof Matrix&&!(i instanceof Matrix)||i instanceof Matrix&&!(t instanceof Matrix))throw"You can't add a matrix and number sorry!";r=t.subtract(i);break;case"/":if(!(t instanceof Matrix)&&i instanceof Matrix)throw"You can't divide a number by a matrix!";r=t.divide(i);break;case"*":r=t instanceof Matrix?t.times(i):i instanceof Matrix?i.times(t):t.times(i);break;case"^":if(t instanceof Matrix)r=i instanceof Matrix?t.conjugate(i):t.power(i);else{if(!(t instanceof Fraction&&i instanceof Fraction))throw"That's not valid maths! ";r=t.power(i)}}return r}function isOperator(t){return"+^-*/".split("").indexOf(t)>=0}function isCloseBracket(t){return")"==t}function isOpenBracket(t){return"("==t}function isBrackets(t){return isCloseBracket(t)||isOpenBracket(t)}function isOperatorOrBracket(t){return isOperator(t)||isBrackets(t)||","==t}function isSquiggle(t){return"}"==t||"{"==t}function deleteMatrix(t){variables.delete($(t).attr("id").split("-")[1]),t.remove(),$("#bin").attr("src","img/bin.png")}function newInputComp(t,e){var r,a;null!=e&&void 0!=e||(e=new Matrix),e instanceof Matrix?(a=e.numCols(),r=e.numRows()):r=a=1,variables.set(t,e);var n=$("<div>",{id:"MAT-"+t,class:"matInput draggable drag-drop","data-clicked":0}),s=$("<img>",{class:"handle noSelect",src:"img/dragHandle.png"}),o=$("<span>",{class:"label noSelect"}),c=$("<label>",{class:"pull-left noSelect"}),l=$("<input>",{class:"clickedit",type:"text"});interact(".draggable").draggable({snap:{targets:[interact.createSnapGrid({x:20,y:20})],range:1/0,relativePoints:[{x:0,y:0}]},inertia:!0,restrict:{restriction:"#mainBody",endOnly:!1,elementRect:{top:0,left:0,bottom:0,right:1}},autoScroll:!0,onmove:dragMoveListener}).allowFrom(".handle"),window.dragMoveListener=dragMoveListener,c.append(t),o.append(c),o.append(l),o.append("     = "),n.append(o);var u=$("<div>",{class:"matContainer"}),h=$("<table>",{class:isNaN(e)?"matGui":"",id:"t"+count});for(h.attr("data-cols",a),h.attr("data-rows",r),i=0;i<r;i++){var d=$("<tr>");for(j=0;j<a;j++){var p=$("<td>");p.append(getCell(i,j,e instanceof Matrix?e.getCell(i,j).toString():e instanceof Fraction?e.toString():e)),d.append(p)}h.append(d)}if(u.append(h),n.append(u),isNaN(e)){$modifiers=$("<span>",{class:"guiModifiers"});var m=function(){return $("<img>",{src:"img/arrow.png"})};$colbtn=$("<button>",{class:"addCol colButton rowColModifier noSelect"}),$colbtn.append(m()),$rowbtn=$("<button>",{class:"addRow rowButton rowColModifier noSelect flipY"}),$rowbtn.append(m()),$rmvColbtn=$("<button>",{class:"rmvCol colButton rowColModifier noSelect flip"}),$rmvColbtn.append(m()),$rmvRowbtn=$("<button>",{class:"rmvRow rowButton rowColModifier noSelect addLeftMargin"}),$rmvRowbtn.append(m()),$colbtn.attr("data-tableid","t"+count),$rowbtn.attr("data-tableid","t"+count),$rmvRowbtn.attr("data-tableid","t"+count),$rmvColbtn.attr("data-tableid","t"+count),$colbtn.click(function(t){t.stopImmediatePropagation();var i=0;h=$("#"+$(this).attr("data-tableid"));var e=h.attr("data-cols")-1,r=h.attr("data-rows");h.attr("data-cols",e+2),h.find("tr").each(function(){var t=$("<td>");t.append(getCell(i,e+1,"0")),i++,$(this).find("td").eq(e).after(t)});var a=$(this).closest(".matInput").attr("id").split("-")[1];variables.get(a).resize(parseInt(r),e+2)}),$rowbtn.click(function(t){t.stopImmediatePropagation(),h=$("#"+$(this).attr("data-tableid"));var e=h.attr("data-cols"),r=h.attr("data-rows");for(h.attr("data-rows",parseInt(r)+1),d=$("<tr>"),i=0;i<e;i++)p=$("<td>"),p.append(getCell(r,i,"0")),d.append(p);h.append(d);var a=$(this).closest(".matInput").attr("id").split("-")[1];variables.get(a).resize(parseInt(r)+1,parseInt(e))}),$rmvColbtn.click(function(t){t.stopImmediatePropagation();var i=$("#"+$(this).attr("data-tableid")),e=parseInt(i.attr("data-cols")),r=parseInt(i.attr("data-rows"));if(e>1){$("#"+$(this).attr("data-tableid")+" td:last-child").remove(),e--,i.attr("data-cols",e);var a=$(this).closest(".matInput").attr("id").split("-")[1];variables.get(a).resize(r,e)}}),$rmvRowbtn.click(function(t){t.stopImmediatePropagation();var i=$("#"+$(this).attr("data-tableid")),e=parseInt(i.attr("data-rows")),r=parseInt(i.attr("data-cols"));if(e>1){$("#"+$(this).attr("data-tableid")+" tr:last-child").remove(),e--,i.attr("data-rows",e);var a=$(this).closest(".matInput").attr("id").split("-")[1];variables.get(a).resize(e,r)}}),n.click(function(t){t.stopImmediatePropagation();var i=$(this).attr("id");1==$(this).attr("data-clicked")?($(this).css("background-color","rgba(204, 204, 204, 0.2)"),$(this).attr("data-clicked",0),selected.splice(selected.indexOf(i),1)):($(this).css("background-color","rgba(99, 182, 255, 0.2)"),$(this).attr("data-clicked",1),selected.push(i)),$selectedMatrix=this}),count++,$modifiers.append($rmvRowbtn),$modifiers.append($rowbtn),$modifiers.append($rmvColbtn),$modifiers.append($colbtn),n.append($modifiers)}n.append(s),$("#matDefinitions").append(n),$(".clickedit").hide().focusout(endEdit).keyup(function(t){return t.stopImmediatePropagation(),!(t.which&&13==t.which||t.keyCode&&13==t.keyCode)||(endEdit(t),!1)}).prev().click(function(t){t.stopImmediatePropagation(),$(this).hide(),$(this).next().show().focus()})}function getCell(t,i,e){var r=$("<input>",{class:"matrixCell",type:"text"});return r.val(e),"0"==e&&r.css("color","gray"),r.attr("data-row",t),r.attr("data-col",i),r.click(function(t){t.stopImmediatePropagation(),"0"==$(this).val()&&$(this).val(""),$(this).css("color","black")}),r.change(function(t){t.stopImmediatePropagation();var i=$(this).closest(".matInput").attr("id").split("-")[1],e=$(this).attr("data-row"),a=$(this).attr("data-col");""===$(this).val().trim()?(r.css("color","gray"),variables.get(i).update(e,a,0),$(this).val("0")):variables.get(i).update(e,a,$(this).val())}),r.keyup(function(t){t.stopImmediatePropagation()}),r}function dragMoveListener(t){var i=t.target,e=(parseFloat(i.getAttribute("data-x"))||0)+t.dx,r=(parseFloat(i.getAttribute("data-y"))||0)+t.dy;i.style.webkitTransform=i.style.transform="translate("+e+"px, "+r+"px)",i.setAttribute("data-x",e),i.setAttribute("data-y",r)}function endEdit(t){t.stopImmediatePropagation();var i=$(t.target),e=i&&i.prev(),r=makeCammelCase(i.val()),a=!1;if(isValid(r,!1)){e.text(r);var n=variables.get(e.closest("div").attr("id").split("-")[1]);variables.delete(e.closest("div").attr("id").split("-")[1]),variables.set(r,n),e.closest("div").attr("id","MAT-"+r)}else e.text(e.closest("div").attr("id").split("-")[1]),a=!0;i.hide(),e.show(),i.val(""),a&&errorHandle("Invalid Variable Name :(")}function isValid(t,i){return/^[a-z0-9]+$/i.test(t)&&(!!i||void 0===variables.get(t))&&getEnum(t)===funcENUM.NONE}function makeCammelCase(t){return t=t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()}),t=t.replace(/ /g,"").replace(/-/g,""),t.length>1&&(t=t.charAt(0).toLowerCase()+t.slice(1)),t}function updateGUI(t,i){if(variables.set(t,i),i instanceof Matrix){var e=parseInt(i.numRows()-$("#MAT-"+t).find("table").attr("data-rows")),r=parseInt(i.numCols()-$("#MAT-"+t).find("table").attr("data-cols"));if(0!==e||0!==r){for(var a=$("#MAT-"+t).find(".guiModifiers"),n=a.find(".addCol"),s=a.find(".rmvCol"),o=a.find(".addRow"),c=a.find(".rmvRow"),l=0;l<Math.abs(e);l++)e<0?c.trigger("click"):o.trigger("click");for(var l=0;l<Math.abs(r);l++)r<0?s.trigger("click"):n.trigger("click")}}$("#MAT-"+t).find("table tr").each(function(){$(this).find("td").each(function(){var t=$(this).find("input"),e=t.attr("data-row"),r=t.attr("data-col");t.val(i instanceof Matrix?i.getCell(e,r):i.toString())})})}var variables=new Map,funcENUM={NONE:"#",TRANSPOSE:"#T",INVERSE:"#I",RANK:"#R",DET:"#D",EIGEN:"#E",DIAGONALIZE:"#DI",ROWREDUCE:"#RRD",SOLVAUG:"#SA",ID:"#ID",ZEROS:"#ZE",isFunction:function(t){var i=!1;return $.each(this,function(e,r){r==t&&(i=!0)}),i},getString:function(t){switch(t){case this.TRANSPOSE:return"transpose";case this.RANK:return"rank";case this.INVERSE:return"inverse";case this.DET:return"determinant";case this.EIGEN:return"eigenvalues/vectors";case this.DIAGONALIZE:return"diagonal form";case this.ROWREDUCE:case this.SOLVAUG:return"Reduced Echelon Form";case this.ID:return"identity matrix";case this.ZEROS:return"0 matrix"}return"NOTHING"}},base="MatCalculator >> ",regex=new RegExp("^"+base,"i"),comHist=[];comHist.add=function(t){this.indexOf(t)<0&&this.push(t)};var histPos=0,alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),letterIndex=-1;interact(".dropzone").dropzone({accept:".matInput",ondragenter:function(t){$("#bin").attr("src","img/openBin.png")},ondragleave:function(t){$("#bin").attr("src","img/bin.png")},ondrop:function(t){deleteMatrix(t.relatedTarget);var i=selected.indexOf($(t.relatedTarget).attr("id"));i!=-1&&selected.splice(i,1)}}),$(document).keyup(function(t){if(46==t.keyCode)for(var i in selected)deleteMatrix($("#"+selected[i]));selected=[]});var count=0,selected=[];$(document).ready(function(){$("#cmdinput").on("input",function(t){var i=$(this).val();regex.test(i)||$(this).val(base)}).keyup(function(t){t.stopImmediatePropagation();var i=t.keyCode?t.keyCode:t.which;if(13==i){var e=$(this).val().slice(base.length);comHist.add(e.replace(/\n/g,"")),histPos++,commandInput(e)}else 38==i&&comHist.length>0?(histPos>0&&histPos--,$(this).val(base+comHist[histPos])):40==i&&comHist.length>0?(histPos<comHist.length-1&&histPos++,$(this).val(base+comHist[histPos])):histPos=comHist.length}),$("#btnNewMat").hover(function(){$("#newLabel").show()},function(){$("#newLabel").hide()}).click(function(){newInputComp(getNextFreeLetter())})});